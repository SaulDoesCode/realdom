(function(){var f="undefined"!==typeof module&&module.exports?"node":"browser",m=function(a){return"string"===typeof a},u=function(a,b){if(!a||!b)return!1;var c=!0;"undefined"===a[b]&&(c=b in a);return c},n=function(a,b){if(!m(a))return"";var c=a?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):a||"";return c&&b?c.replace(/\r?\n|\r/g," ").replace(/\s\s+|\r/g," "):c},h={ENV:f},g,v,p;g=function(a){var b=(m(a)?document.getElementById(a):a)||null;if(b&&b instanceof HTMLElement){var c=b.classList;b.hasClass=function(b){return(b=
n(b,!0))?c.contains(b):!1};b.addClass=function(a){a=n(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(b){c.add(b)}):c.add(a);return b};b.removeClass=function(a){a=n(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(b){c.remove(b)}):c.remove(a);return b};b.toggleClass=function(a){a=n(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(a){c.toggle(a)}):c.toggle(a);return b};b.empty=function(){b.innerHTML="";return b};b.html=function(a){if(!a)return b.innerHTML;
b.innerHTML=a;return b};b.destroy=function(){b.parentNode&&b.parentNode.removeChild(b)}}return b};v=function(a,b){var c=b?g(b):document.body,d=a instanceof HTMLElement?a:document.createElement(a);c.appendChild(d);return g(d)};p=function(a){return g(document.createElement(a))};h.ready=function(a){"loading"!==document.readyState?setTimeout(a,0):document.addEventListener("DOMContentLoaded",a)};h.one=function(a){var b;(a=document.querySelector(a))&&(b=g(a));return b};h.all=function(a){var b=[];if(a=document.querySelectorAll(a))for(var c=
0;c<a.length;c++)b.push(g(a[c]));return b};h.get=g;h.add=v;h.create=p;h.Event=function(){var a=function(a){a=a.toLowerCase();return/gecko/i.test(a)}(navigator.userAgent);return{on:function(b,c,d){"wheel"===c&&(c=a?"DOMMouseScroll":"mousewheel");b=m(b)?g(b):b;d=d||function(){};b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&b.attachEvent("on"+c,d)},off:function(a,c,d){a=m(a)?g(a):a;a.removeEventListener?a.removeEventListener(c,d,!1):a.detachEvent&&a.detachEvent("on"+c,d)},simulate:function(a,
c){var d,e=m(a)?g(a):a;document.createEventObject?(d=document.createEventObject(),e.fireEvent("on"+c,d)):(d=document.createEvent("HTMLEvents"),d.initEvent(c,!0,!0),e.dispatchEvent(d))},stop:function(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return!1},locate:function(a){a=a||window.event;(a=a.target||a.srcElement)&&3===a.nodeType&&(a=a.parentNode);return g(a)}}}();h.getMousePosition=function(a){a=a||window.event;var b={x:0,y:0};if(a.pageX||a.pageY)b.x=
a.pageX,b.y=a.pageY;else{var c=document.documentElement,d=document.body;b.x=a.clientX+(c.scrollLeft||d.scrollLeft)-(c.clientLeft||0);b.y=a.clientY+(c.scrollTop||d.scrollTop)-(c.clientTop||0)}return b};h.getWindowSize=function(){var a=0,b=0;window.innerWidth?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(a=document.body.clientWidth,b=document.body.clientHeight);
return{width:a,height:b}};var l={ENV:f},q=new Map,r=new Map,t=new Map,x=function(a){a=JSON.stringify(a);return JSON.parse(a)};l.get=function(a){return r.get(a)};l.getFull=function(a){return{actual:q.get(a),virtual:r.get(a),mirror:t.get(a)}};l.remove=function(a){q.remove(a);r.remove(a);t.remove(a)};var w=function(a,b){var c=b?v(a.tagName,b):p(a.tagName);c.setAttribute("tagId",a.tagId);var d=a.attributes,e;for(e in d)if(u(d,e)){var g=d[e];"text"===e?(g=document.createTextNode(g),c.appendChild(g)):m(g)&&
c.setAttribute(e,g)}var d=a.events,f;for(f in d)u(d,f)&&(e=d[f],h.Event.on(c,e.name,e.callback));f=a.nodeList;if(0<f.length)for(d=0;d<f.length;d++)w(f[d],c)},k=function(a,b,c,d){var e;for(e=[];10>e.length;)e.push(Math.random().toString(36).slice(2));e=e.join("");for(var f=e.length,h=Math.max(16,0),k="";k.length<h;)k+=e.charAt(Math.floor(Math.random()*f))||"";e=k;a=g(a)||p(a);a.empty();this.tagName=a.tagName;this.tagId=e;this.attributes=b||Object.create(null);b=[];for(var l in c)u(c,l)&&(a=c[l])&&
"[object Function]"==={}.toString.call(a)&&b.push({name:l,callback:a});this.events=b;this.nodeList=d||[];q.set(e,null);t.set(e,null);r.set(e,this);return this};k.prototype.setAttribute=function(a,b){this.attributes[a]=b;return this};k.prototype.setEvent=function(a,b){this.events.push({name:a,callback:b});return this};k.prototype.insert=function(a,b,c,d){a=new k(a,b,c,d);a.parentId=this.tagId;this.nodeList.unshift(a);return a};k.prototype.append=function(a,b,c,d){a=new k(a,b,c,d);a.parentId=this.tagId;
this.nodeList.push(a);return a};k.prototype.remove=function(a){var b=!1,c=function(d){d=d.nodeList||[];if(0<d.length)for(var e=d.length-1;0<=e;e--){var f=d[e];if(f.tagId===a){d.splice(e,1);b=!0;break}else c(f)}};c(this);return b};k.prototype.render=function(a){a=g(a);var b=this.tagId;a||(a=h.one('[tagId="'+b+'"]'));if(a){a.empty();a.setAttribute("tagId",b);for(var c=this.nodeList,d=a,e=0;e<c.length;e++)w(c[e],d);q.set(b,a);t.set(b,x(this))}};l.create=function(a,b,c){return new k(a,b,c)};"node"===
f?module.exports={DOM:h,vDOM:l}:(f=window||{},f.define&&f.define.amd&&f.define(function(){return{DOM:h,vDOM:l}}),f.DOM=h,f.vDOM=l)})();