(function(g){if("node"===("undefined"!==typeof module&&module.exports?"node":"browser"))module.exports=g();else{var h=window||{};h.define&&h.define.amd?h.define([],g):h.exports?h.exports=g():(g=g(),h.DOM=g.DOM,h.vDOM=g.vDOM)}})(function(){var g={},h={},m=function(a){return"string"===typeof a},n=function(a,b){if(!a||!b)return!1;var c=!0;void 0===a[b]&&(c=b in a);return c},q=function(a,b){if(!m(a))return"";var c=a?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):a||"";return c&&b?c.replace(/\r?\n|\r/g," ").replace(/\s\s+|\r/g,
" "):c},k,w,p;k=function(a){var b=(m(a)?document.getElementById(a):a)||null;if(b&&b instanceof HTMLElement){var c=b.classList;b.hasClass=function(b){return(b=q(b,!0))?c.contains(b):!1};b.addClass=function(a){a=q(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(b){c.add(b)}):c.add(a);return b};b.removeClass=function(a){a=q(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(a){c.remove(a)}):c.remove(a);return b};b.toggleClass=function(a){a=q(a,!0);if(!a)return!1;
var e=a.split(" ");1<e.length?e.forEach(function(a){c.toggle(a)}):c.toggle(a);return b};b.empty=function(){b.innerHTML="";return b};b.html=function(a){if(void 0===a)return b.innerHTML;b.innerHTML=a;return b};b.destroy=function(){b.parentNode&&b.parentNode.removeChild(b)}}return b};w=function(a,b){var c=b?k(b):document.body,d=a instanceof HTMLElement?a:document.createElement(a);c.appendChild(d);return k(d)};p=function(a){return k(document.createElement(a))};g.ready=function(a){"loading"!==document.readyState?
setTimeout(a,0):document.addEventListener("DOMContentLoaded",a)};g.one=function(a){var b;(a=document.querySelector(a))&&(b=k(a));return b};g.all=function(a){var b=[];if(a=document.querySelectorAll(a))for(var c=0;c<a.length;c++)b.push(k(a[c]));return b};g.get=k;g.add=w;g.create=p;g.Event=function(){var a=function(a){a=a.toLowerCase();return/gecko/i.test(a)}(navigator.userAgent);return{on:function(b,c,d){"wheel"===c&&(c=a?"DOMMouseScroll":"mousewheel");b=m(b)?k(b):b;d=d||function(){};b.addEventListener?
b.addEventListener(c,d,!1):b.attachEvent&&b.attachEvent("on"+c,d)},off:function(a,c,d){a=m(a)?k(a):a;a.removeEventListener?a.removeEventListener(c,d,!1):a.detachEvent&&a.detachEvent("on"+c,d)},simulate:function(a,c){var d,e=m(a)?k(a):a;document.createEventObject?(d=document.createEventObject(),e.fireEvent("on"+c,d)):(d=document.createEvent("HTMLEvents"),d.initEvent(c,!0,!0),e.dispatchEvent(d))},stop:function(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();
return!1},locate:function(a){a=a||window.event;(a=a.target||a.srcElement)&&3===a.nodeType&&(a=a.parentNode);return k(a)}}}();var l=function(){this.data={}};l.prototype.set=function(a,b){this.data[a]=b;return this};l.prototype.get=function(a){return this.data[a]||null};l.prototype.has=function(a){return n(this.data,a)};l.prototype["delete"]=function(a){if(!this.has(a))return!1;var b=this.data;b[a]=null;delete b[a];return!0};var t=new l,u=new l,v=new l,y=function(a){a=JSON.stringify(a);return JSON.parse(a)};
h.get=function(a,b){return a&&m(a)?!0===b?{actual:t.get(a),virtual:u.get(a),mirror:v.get(a)}:u.get(a):null};h.remove=function(a){t["delete"](a);u["delete"](a);v["delete"](a)};var x=function(a,b){var c=b?w(a.tagName,b):p(a.tagName);c.setAttribute("tagId",a.tagId);var d=a.attributes,e;for(e in d)if(n(d,e)){var r=d[e];"text"===e?(r=document.createTextNode(r),c.appendChild(r)):c.setAttribute(e,r)}var d=a.events,f;for(f in d)n(d,f)&&(e=d[f],g.Event.on(c,e.name,e.callback));f=a.nodeList;if(0<f.length)for(d=
0;d<f.length;d++)x(f[d],c)},f=function(a,b,c,d){var e;for(e=[];10>e.length;)e.push(Math.random().toString(36).slice(2));e=e.join("");for(var f=e.length,g=Math.max(16,0),h="";h.length<g;)h+=e.charAt(Math.floor(Math.random()*f))||"";e=h;this.tagName=(k(a)||p(a)).tagName;this.tagId=e;this.attributes=b||Object.create(null);a=[];for(var l in c)n(c,l)&&(b=c[l])&&"[object Function]"==={}.toString.call(b)&&a.push({name:l,callback:b});this.events=a;this.nodeList=d||[];t.set(e,null);v.set(e,null);u.set(e,this);
return this};f.prototype.setAttribute=function(a,b){this.attributes[a]=b;return this};f.prototype.hasAttribute=function(a){return n(this.attributes,a)};f.prototype.getAttribute=function(a){return this.attributes[a]||null};f.prototype.removeAttribute=function(a){this.attributes[a]=null;delete this.attributes[a];return this};f.prototype.setEvent=function(a,b){this.events.push({name:a,callback:b});return this};f.prototype.removeEvent=function(a){this.events[a]=null;delete this.events[a];return this};
f.prototype.insert=function(a,b,c,d){a=new f(a,b,c,d);a.parentId=this.tagId;this.nodeList.unshift(a);return a};f.prototype.append=function(a,b,c,d){a=new f(a,b,c,d);a.parentId=this.tagId;this.nodeList.push(a);return a};f.prototype.find=function(a){var b,c=function(d){d=d.nodeList||[];if(0<d.length&&!b)for(var e=0;e<d.length;e++){var f=d[e];if(f.tagId===a){b=f;break}else c(f)}return b};return c(this)||null};f.prototype.remove=function(a){var b=!1,c=function(d){var e=d.nodeList||[];if(0<e.length)for(var f=
e.length-1;0<=f;f--){var g=e[f];if(g.tagId===a){e.splice(f,1);b=!0;d.nodeList=e;break}else c(g)}};c(this);return b};f.prototype.render=function(a){var b=this.tagId,c=g.one('[tagId="'+b+'"]');c||(c=p(this.tagName),c.setAttribute("tagId",b));if(c){(a=k(a))||(a=k(c.parentNode));for(var d=this.nodeList,e=c,f=0;f<d.length;f++)x(d[f],e);a.empty();a.appendChild(c);t.set(b,c);v.set(b,y(this))}};h.Element=f;h.create=function(a,b,c,d){return new f(a,b,c,d)};return{DOM:g,vDOM:h}});