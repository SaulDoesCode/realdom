(function(){var q="undefined"!==typeof module&&module.exports?"node":"browser",h={ENV:q},k={ENV:q},m=function(a){var b=Object.prototype.toString,c=typeof a;if("object"===c){if(a){if(-1!==b.call(a).indexOf("HTML")&&-1!==b.call(a).indexOf("Element"))return"element";if(a instanceof Array||!(a instanceof Object)&&"[object Array]"===b.call(a)||"number"===typeof a.length&&"undefined"!==typeof a.splice&&"undefined"!==typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof
Object||"[object Function]"!==b.call(a)&&("undefined"===typeof a.call||"undefined"===typeof a.propertyIsEnumerable||a.propertyIsEnumerable("call"))))return"function"}return"object"}return"function"===c&&"undefined"===typeof a.call?"object":c},w=function(a){return null===m(a)||null===a},l=function(a){return!w(a)&&"string"===m(a)},z=function(a){return a&&"node"===q&&a._root?!0:!w(a)&&"element"===m(a)},x=function(a,b){if(!a||!b)return!1;var c=!0;"undefined"===m(a[b])&&(c=b in a);return c},r=function(a,
b){if(!l(a))return"";var c=a?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):a||"";return c&&b?c.replace(/\r?\n|\r/g," ").replace(/\s\s+|\r/g," "):c},g,y,n;g=function(a){var b=(l(a)?document.getElementById(a):a)||null;if(b&&z(b)){var c=b.classList;b.hasClass=function(a){return(a=r(a,!0))?c.contains(a):!1};b.addClass=function(a){a=r(a,!0);if(!a)return!1;var d=a.split(" ");1<d.length?d.forEach(function(a){c.add(a)}):c.add(a);return b};b.removeClass=function(a){a=r(a,!0);if(!a)return!1;var d=a.split(" ");1<d.length?
d.forEach(function(a){c.remove(a)}):c.remove(a);return b};b.toggleClass=function(a){a=r(a,!0);if(!a)return!1;var d=a.split(" ");1<d.length?d.forEach(function(a){c.toggle(a)}):c.toggle(a);return b};b.empty=function(){b.innerHTML="";return b};b.html=function(a){if(!a)return b.innerHTML;b.innerHTML=a;return b};b.destroy=function(){b.parentNode&&b.parentNode.removeChild(b)}}return b};y=function(a,b){var c=b?g(b):document.body,e=z(a)?a:document.createElement(a);c.appendChild(e);return g(e)};n=function(a){return g(document.createElement(a))};
h.ready=function(a){"loading"!==document.readyState?setTimeout(a,0):document.addEventListener("DOMContentLoaded",a)};h.one=function(a){var b;(a=document.querySelector(a))&&(b=g(a));return b};h.all=function(a){var b=[];if(a=document.querySelectorAll(a))for(var c=0;c<a.length;c++)b.push(g(a[c]));return b};h.get=g;h.add=y;h.create=n;(function(){var a=n("A");a.href=document.URL;var b=a.hostname;a.destroy();h.hostname=b})();var B=function(a){a=a.toLowerCase();return/gecko/i.test(a)}(navigator.userAgent);
h.Event=function(){return{on:function(a,b,c){"wheel"===b&&(b=B?"DOMMouseScroll":"mousewheel");a=l(a)?g(a):a;c=c||function(){};a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c){a=l(a)?g(a):a;a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},simulate:function(a,b){var c,e=l(a)?g(a):a;document.createEventObject?(c=document.createEventObject(),e.fireEvent("on"+b,c)):(c=document.createEvent("HTMLEvents"),
c.initEvent(b,!0,!0),e.dispatchEvent(c))},stop:function(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return!1},detect:function(a){a=a||window.event;(a=a.target||a.srcElement)&&3===a.nodeType&&(a=a.parentNode);return g(a)}}}();h.getMousePosition=function(a){a=a||window.event;var b={x:0,y:0};if(a.pageX||a.pageY)b.x=a.pageX,b.y=a.pageY;else{var c=document.documentElement,e=document.body;b.x=a.clientX+(c.scrollLeft||e.scrollLeft)-(c.clientLeft||0);b.y=
a.clientY+(c.scrollTop||e.scrollTop)-(c.clientTop||0)}return b};h.getWindowSize=function(){var a=0,b=0;window.innerWidth?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(a=document.body.clientWidth,b=document.body.clientHeight);return{width:a,height:b}};var t=new Map,u=new Map,v=new Map,C=function(a){a=JSON.stringify(a);return JSON.parse(a)};k.get=
function(a){return u.get(a)};k.getFull=function(a){return{actual:t.get(a),virtual:u.get(a),mirror:v.get(a)}};k.remove=function(a){t.remove(a);u.remove(a);v.remove(a)};var A=function(a,b){var c=b?y(a.tagName,b):n(a.tagName);c.setAttribute("tagId",a.tagId);var e=a.attributes,d;for(d in e)if(x(e,d)){var g=e[d];"text"===d?(g=document.createTextNode(g),c.appendChild(g)):l(g)&&c.setAttribute(d,g)}var e=a.events,f;for(f in e)x(e,f)&&(d=e[f],h.Event.on(c,d.name,d.callback));f=a.nodeList;if(0<f.length)for(e=
0;e<f.length;e++)A(f[e],c)},f=function(a,b,c,e){var d;d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";d+=d.toLowerCase();d+="0123456789";for(var f=d.length,h=Math.max(16,0),k="";k.length<h;)k+=d.charAt(Math.floor(Math.random()*f))||"";d=k;a=g(a)||n(a);a.empty();this.tagName=a.tagName;this.tagId=d;this.attributes=b||Object.create(null);b=[];for(var l in c)x(c,l)&&(f=a=c[l],w(f)||"function"!==m(f)||b.push({name:l,callback:a}));this.events=b;this.nodeList=e||[];t.set(d,null);v.set(d,null);u.set(d,this);return this};
f.prototype.setAttribute=function(a,b){this.attributes[a]=b;return this};f.prototype.setEvent=function(a,b){this.events.push({name:a,callback:b});return this};f.prototype.insert=function(a,b,c,e){a=new f(a,b,c,e);a.parentId=this.tagId;this.nodeList.unshift(a);return a};f.prototype.append=function(a,b,c,e){a=new f(a,b,c,e);a.parentId=this.tagId;this.nodeList.push(a);return a};f.prototype.remove=function(a){var b=!1,c=function(e){e=e.nodeList||[];if(0<e.length)for(var d=e.length-1;0<=d;d--){var f=e[d];
if(f.tagId===a){e.splice(d,1);b=!0;break}else c(f)}};c(this);return b};f.prototype.render=function(a){a=g(a);var b=this.tagId;a||(a=h.one('[tagId="'+b+'"]'));if(a){a.empty();a.setAttribute("tagId",b);for(var c=this.nodeList,e=a,d=0;d<c.length;d++)A(c[d],e);t.set(b,a);v.set(b,C(this))}};k.create=function(a,b,c){return new f(a,b,c)};if("node"===q)module.exports={DOM:h,vDOM:k};else{var p=window||{};p.define&&p.define.amd&&p.define(function(){return{DOM:h,vDOM:k}});p.DOM=h;p.vDOM=k}})();