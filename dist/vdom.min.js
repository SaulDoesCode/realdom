(function(e){function f(a,c){function b(a){if(!this||this.constructor!==b)return new b(a);this._keys=[];this._values=[];this._itp=[];this.objectOnly=c;a&&v.call(this,a)}c||w(a,"size",{get:x});a.constructor=b;b.prototype=a;return b}function v(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function d(a){this.has(a)&&(this._keys.splice(b,1),this._values.splice(b,1),this._itp.forEach(function(a){b<a[0]&&a[0]--}));return-1<b}function m(a){return this.has(a)?this._values[b]:
void 0}function n(a,c){if(this.objectOnly&&c!==Object(c))throw new TypeError("Invalid value used as weak collection key");if(c!=c||0===c)for(b=a.length;b--&&!y(a[b],c););else b=a.indexOf(c);return-1<b}function p(a){return n.call(this,this._values,a)}function q(a){return n.call(this,this._keys,a)}function r(a,c){this.has(a)?this._values[b]=c:this._values[this._keys.push(a)-1]=c;return this}function t(a){this.has(a)||this._values.push(a);return this}function h(){(this._keys||0).length=this._values.length=
0}function z(){return k(this._itp,this._keys)}function l(){return k(this._itp,this._values)}function A(){return k(this._itp,this._keys,this._values)}function B(){return k(this._itp,this._values,this._values)}function k(a,c,b){var g=[0],e=!1;a.push(g);return{next:function(){var f,d=g[0];!e&&d<c.length?(f=b?[c[d],b[d]]:c[d],g[0]++):(e=!0,a.splice(a.indexOf(g),1));return{done:e,value:f}}}}function x(){return this._values.length}function u(a,c){for(var b=this.entries();;){var d=b.next();if(d.done)break;
a.call(c,d.value[1],d.value[0],this)}}var b,w=Object.defineProperty,y=function(a,b){return isNaN(a)?isNaN(b):a===b};"undefined"==typeof WeakMap&&(e.WeakMap=f({"delete":d,clear:h,get:m,has:q,set:r},!0));"undefined"!=typeof Map&&"function"===typeof(new Map).values&&(new Map).values().next||(e.Map=f({"delete":d,has:q,get:m,set:r,keys:z,values:l,entries:A,forEach:u,clear:h}));"undefined"!=typeof Set&&"function"===typeof(new Set).values&&(new Set).values().next||(e.Set=f({has:p,add:t,"delete":d,clear:h,
keys:l,values:l,entries:B,forEach:u}));"undefined"==typeof WeakSet&&(e.WeakSet=f({"delete":d,add:t,clear:h,has:p},!0))})("undefined"!=typeof exports&&"undefined"!=typeof global?global:window);
(function(g,h){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=h();else if("function"===typeof define&&define.amd)define(h);else{var l=h();g.DOM=l.DOM;g.vDOM=l.vDOM}})(this,function(){var g={},h={},l=function(a){return"string"===typeof a},n=function(a,b){if(!a||!b)return!1;var c=!0;void 0===a[b]&&(c=b in a);return c},p=function(a,b){if(!l(a))return"";var c=a?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):a||"";return c&&b?c.replace(/\r?\n|\r/g," ").replace(/\s\s+|\r/g," "):c},k,v,
m;k=function(a){var b=(l(a)?document.getElementById(a):a)||null;if(b&&b instanceof HTMLElement){var c=b.classList;b.hasClass=function(b){return(b=p(b,!0))?c.contains(b):!1};b.addClass=function(a){a=p(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(b){c.add(b)}):c.add(a);return b};b.removeClass=function(a){a=p(a,!0);if(!a)return!1;var e=a.split(" ");1<e.length?e.forEach(function(b){c.remove(b)}):c.remove(a);return b};b.toggleClass=function(a){a=p(a,!0);if(!a)return!1;var e=a.split(" ");
1<e.length?e.forEach(function(b){c.toggle(b)}):c.toggle(a);return b};b.empty=function(){b.innerHTML="";return b};b.html=function(a){if(void 0===a)return b.innerHTML;b.innerHTML=a;return b};b.destroy=function(){b.parentNode&&b.parentNode.removeChild(b)}}return b};v=function(a,b){var c=b?k(b):document.body,d=a instanceof HTMLElement?a:document.createElement(a);c.appendChild(d);return k(d)};m=function(a){return k(document.createElement(a))};g.ready=function(a){"loading"!==document.readyState?setTimeout(a,
0):document.addEventListener("DOMContentLoaded",a)};g.one=function(a){var b;(a=document.querySelector(a))&&(b=k(a));return b};g.all=function(a){var b=[];if(a=document.querySelectorAll(a))for(var c=0;c<a.length;c++)b.push(k(a[c]));return b};g.get=k;g.add=v;g.create=m;g.Event=function(){var a=function(a){a=a.toLowerCase();return/gecko/i.test(a)}(navigator.userAgent);return{on:function(b,c,d){"wheel"===c&&(c=a?"DOMMouseScroll":"mousewheel");b=l(b)?k(b):b;d=d||function(){};b.addEventListener?b.addEventListener(c,
d,!1):b.attachEvent&&b.attachEvent("on"+c,d)},off:function(a,c,d){a=l(a)?k(a):a;a.removeEventListener?a.removeEventListener(c,d,!1):a.detachEvent&&a.detachEvent("on"+c,d)},simulate:function(a,c){var d,e=l(a)?k(a):a;document.createEventObject?(d=document.createEventObject(),e.fireEvent("on"+c,d)):(d=document.createEvent("HTMLEvents"),d.initEvent(c,!0,!0),e.dispatchEvent(d))},stop:function(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return!1},locate:function(a){a=
a||window.event;(a=a.target||a.srcElement)&&3===a.nodeType&&(a=a.parentNode);return k(a)}}}();var r=new Map,t=new Map,u=new Map,x=function(a){a=JSON.stringify(a);return JSON.parse(a)};h.get=function(a,b){return a&&l(a)?!0===b?{actual:r.get(a),virtual:t.get(a),mirror:u.get(a)}:t.get(a):null};h.remove=function(a){r.remove(a);t.remove(a);u.remove(a)};var w=function(a,b){var c=b?v(a.tagName,b):m(a.tagName);c.setAttribute("tagId",a.tagId);var d=a.attributes,e;for(e in d)if(n(d,e)){var q=d[e];"text"===
e?(q=document.createTextNode(q),c.appendChild(q)):c.setAttribute(e,q)}var d=a.events,f;for(f in d)n(d,f)&&(e=d[f],g.Event.on(c,e.name,e.callback));f=a.nodeList;if(0<f.length)for(d=0;d<f.length;d++)w(f[d],c)},f=function(a,b,c,d){var e;for(e=[];10>e.length;)e.push(Math.random().toString(36).slice(2));e=e.join("");for(var f=e.length,g=Math.max(16,0),h="";h.length<g;)h+=e.charAt(Math.floor(Math.random()*f))||"";e=h;this.tagName=(k(a)||m(a)).tagName;this.tagId=e;this.attributes=b||Object.create(null);
a=[];for(var l in c)n(c,l)&&(b=c[l])&&"[object Function]"==={}.toString.call(b)&&a.push({name:l,callback:b});this.events=a;this.nodeList=d||[];r.set(e,null);u.set(e,null);t.set(e,this);return this};f.prototype.setAttribute=function(a,b){this.attributes[a]=b;return this};f.prototype.hasAttribute=function(a){return n(this.attributes,a)};f.prototype.getAttribute=function(a){return this.attributes[a]||null};f.prototype.removeAttribute=function(a){this.attributes[a]=null;delete this.attributes[a];return this};
f.prototype.setEvent=function(a,b){this.events.push({name:a,callback:b});return this};f.prototype.removeEvent=function(a){this.events[a]=null;delete this.events[a];return this};f.prototype.insert=function(a,b,c,d){a=new f(a,b,c,d);a.parentId=this.tagId;this.nodeList.unshift(a);return a};f.prototype.append=function(a,b,c,d){a=new f(a,b,c,d);a.parentId=this.tagId;this.nodeList.push(a);return a};f.prototype.find=function(a){var b,c=function(d){d=d.nodeList||[];if(0<d.length&&!b)for(var e=0;e<d.length;e++){var f=
d[e];if(f.tagId===a){b=f;break}else c(f)}return b};return c(this)||null};f.prototype.remove=function(a){var b=!1,c=function(d){var e=d.nodeList||[];if(0<e.length)for(var f=e.length-1;0<=f;f--){var g=e[f];if(g.tagId===a){e.splice(f,1);b=!0;d.nodeList=e;break}else c(g)}};c(this);return b};f.prototype.render=function(a){var b=this.tagId,c=g.one('[tagId="'+b+'"]');c||(c=m(this.tagName),c.setAttribute("tagId",b));if(c){(a=k(a))||(a=k(c.parentNode));for(var d=this.nodeList,e=c,f=0;f<d.length;f++)w(d[f],
e);a.empty();a.appendChild(c);r.set(b,c);u.set(b,x(this))}};h.Element=f;h.create=function(a,b,c,d){return new f(a,b,c,d)};return{DOM:g,vDOM:h}});